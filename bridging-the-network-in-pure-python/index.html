<!DOCTYPE html>
<html lang="en">

<head>
  
  <title>Bridging Networks in Pure Python</title>

  <meta name="keywords"
	content="Motoma, Python, network, bridge, hack, reverse connection" />
  <meta name="description"
	content="Every now and then I find myself in a situation where the tools at hand are inappropriate, impeded, or impotent for the task at hand. Whether I am on a machine with insufficient privileges, behind a vindictive NAT, or under the opression of significant egress filtering, from time to time I find myself needing to bridge networks in order to get my work done." />

  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Blagmaster" />
  <meta name="google-site-verification"
        content="fpiMFEd5SHR15hcV7NKYxnCoqx3zGOOC-iqaJdArezw" />
  <meta name="msvalidate.01" content="3209533A2A0F73D1250D50E3CB1ADEF4" />

  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="/static/layout.css" />

  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
  <header>
    <h1><a href="/">
      <img src="/static/motoma.io.32.inverted.eps.png" alt="Motoma.io" />
    </a></h1>
  </header>

  <nav>
    
    <ul>
      <li class="link">
        <a href="/about/" title="Learn more about me" class="link">About</a>
      </li>
        
      <li class="current">
        <a href="/" title="Goto the blog" class="current">Blog</a>
      </li>
    </ul>
    

    <section>
      <a href="/motoma.asc">
	<img src="/static/gpg.png" alt="GPG Public Key" /></a>
      <a href="http://www.linkedin.com/in/motoma" rel="me">
	<img src="/static/linkedin.png" alt="LinkedIn"/></a>
      <a href="http://www.facebook.com/motoma" rel="me">
	<img src="/static/facebook.png" alt="Facebook"/></a>
      <a href="http://www.twitter.com/motoma" rel="me">
	<img src="/static/twitter.png" alt="Twitter" /></a>
      <a href="https://plus.google.com/106366683920288141812?rel=author"
	 rel="me">
	<img src="/static/gplus.png" alt="Google+"/></a>
      <a href="http://www.github.com/motoma" rel="me">
	<img src="/static/github.png" alt="GitHub"/></a>
    </section>
  </nav>

  <section class="content">
    
    <article class="hentry">
      <h3>
	<a href="/bridging-the-network-in-pure-python/" class="entry-title">Bridging Networks in Pure Python</a>
      </h3>
      <p class="byline author vcard instapaper_ignore entry-unrelated">
        <time class="published updated" datetime="2011-09-13">
          2011-09-13</time> by
        <a href="http://motoma.io/about/" rel="author" class="fn nickname url"
	   lang="en">Motoma</a>, tagged as
        
        <a href="/tags/python" rel="tag">
	  Python</a>
        
        <a href="/tags/network" rel="tag">
	  network</a>
        
        <a href="/tags/bridge" rel="tag">
	  bridge</a>
        
        <a href="/tags/hack" rel="tag">
	  hack</a>
        
        <a href="/tags/reverse-connection" rel="tag">
	  reverse connection</a>
        
        
      </p>
      
<p>Every now and then I find myself in a situation where the tools at hand are inappropriate, impeded, or impotent for the task at hand. Whether I am on a machine with insufficient privileges, behind a vindictive NAT, or under the opression of significant egress filtering, from time to time I find myself needing to bridge networks in order to get my work done.</p>

<!-- break -->

<p>There are various ways to do this, the most popular usually involves either <a href="http://en.wikipedia.org/wiki/Netcat">netcat</a> or <a href="http://en.wikipedia.org/wiki/Socat">socat</a>. When these tools are unavailable, I usually resort to a different technique which can be executed purely in Python. What follows are two snippets that I use to route traffic as I see fit.</p>

<p>The first snippent is from my bridge server. This will run on a machine I control, on a port that I am able to access, both from my target server and from the client.</p>

<script src="https://gist.github.com/1215469.js?file=bridged.py"></script>

<p>From there, we build a reverse connection from the target server. This will connect our target service to the bridge we previously built.</p>

<script src="https://gist.github.com/1215538.js?file=bridgec.py"></script>

<p>In the theorhetical example above, pointing a MySQL client at the bridge server's port 8080 will route us to the MySQL database running on the bridge client's local network. A simple demonstration of a otherwise difficult task; this technique has helped me out in a number of different situations.</p>

<p>I hope you find this as useful as I do,</p>
<p>Motoma</p>


    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'motomastyle';
	var disqus_identifier = '/bridging-the-network-in-pure-python';
	var disqus_url = 'http://motoma.io//bridging-the-network-in-pure-python';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
          var dsq = document.createElement('script');
          dsq.type = 'text/javascript';
          dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || 
            document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the 
      <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by 
      <span class="logo-disqus">Disqus</span></a>
    </article>

  </section>

  <aside>
    <section class="projects">
      <ul>
	
	<li class="odd">
	  <a href="https://www.github.com/Motoma/bitgirl">BitGirl</a>
	  <p>BitGirl is a fully pluggable Python-based IRC bot which allows dynamic command and module loading, unloading, and reloading on the fly.</p>
	</li>
	
	<li class="even">
	  <a href="https://code.google.com/p/socksipy-branch/">socksipy-branch</a>
	  <p>A Python SOCKS client module This module was designed to allow developers of Python software that uses the Internet or another TCP/IP-based.</p>
	</li>
	
	<li class="odd">
	  <a href="http://sourceforge.net/projects/pyloris/">PyLoris</a>
	  <p>PyLoris is a scriptable tool for testing a server's vulnerability to connection exhaustion denial of service (DoS) attacks.</p>
	</li>
	
      </ul>
    </section>

    <section class="random">
      <h4>/dev/urandom</h4>
      <p>"It's much better to do good in a way that no one knows anything about it."</p>
      <p> - Leo Tolstoy, <u>Anna Karenina</u></p>
    </section>

    <section class="links">
      <h4>Blogs I Follow</h4>
      <ul>
	<li><a href="http://www.ciaworks.com/">CIA Works</a></li>
        <li><a href="http://www.eflorenzano.com/">Die in a Fire</a></li>
	<li><a href="http://hackingdistributed.com/">Hacking, Distributed</a></li>
	<li><a href="http://jacobian.org/writing/">Jacob Kaplan-Moss</a></li>
	<li><a href="http://robert-hansen.com/">Known Plaintext</a></li>
        <li><a href="http://www.lostgarden.com/">Lost Garden</a></li>
        <li><a href="http://parsedcontent.blogspot.com/">
	    { Parsed Content }</a></li>
        <li><a href="http://www.particlesinmotion.com/">
	    Particles in Motion</a></li>
        <li><a href="http://www.schneier.com/">Schneier on Security</a></li>
        <li><a href="http://teddziuba.com/">Ted Dziuba</a></li>
        <li><a href="http://rdist.root.org/">root labs rdist</a></li>
        <li><a href="http://www.veracode.com/blog">
	    Veracode Security Blog</a></li>
	<li><a href="http://www.veryofficial.com/">Very Official</a></li>
      </ul>
    </section>

    <section class="links">
      <h4>Web Comics</h4>
      <ul>
        <li><a href="http://www.dresdencodak.com/">Dresden Codak</a></li>
        <li><a href="http://www.xkcd.com/">XKCD</a></li>
      </ul>
    </section>
  </aside>

  <footer>
    <p>motoma.io and all content therein is copyright of Christopher Gilbert 
      â€” &copy; 2016 All rights reserved.</p>
  </footer>

  <script src="http://www.google-analytics.com/ga.js" type="text/javascript"></script>
  <script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-1667338-1");
    pageTracker._initData();
    pageTracker._trackPageview();
  </script>
</body>
</html>